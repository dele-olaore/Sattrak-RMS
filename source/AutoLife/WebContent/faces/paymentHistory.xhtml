<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                template="/WEB-INF/layout/general_layout.xhtml">
    <ui:define name="content">
        <div id="subheader">
            <div class="inner">
                <div class="subdesc">
                    <h1 class="page-title">Payment History</h1>
                    <div class="customtext"><h2> </h2></div>
                </div>
            </div>
        </div><!-- #subheader -->
        <div class="pagemid">
            <div class="inner">
                <div id="main">
                    <div class="entry-content">
                        <div class="section_row clearfix"  style="padding:60px 0px 60px 0px;">
                            <div class="section_bg" ></div>
                            <div class="section_inner">
                            	<div class="wpcf7" id="iva-contact-form">
                            	<h:form id="payHistoryForm" pt:class="wpcf7-form" pt:novalidate="novalidate">
                            		<p>Start Date (required)<br />
                            			<span class="wpcf7-form-control-wrap your-name">
                            				<p:calendar id="stdt" pattern="dd/MM/yyyy HH:mm:ss" showOn="both" mode="popup" value="#{userBean.start_dt}" navigator="true" pt:class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required" pt:aria-required="true" pt:aria-invalid="false" />
                            			</span>
                            		</p>
                            		<p>End Date (required)<br />
                            			<span class="wpcf7-form-control-wrap your-name">
                            				<p:calendar id="eddt" pattern="dd/MM/yyyy HH:mm:ss" showOn="both" mode="popup" value="#{userBean.end_dt}" navigator="true" pt:class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required" pt:aria-required="true" pt:aria-invalid="false" />
                            			</span>
                            		</p>
                            		<p>
                                        <input jsf:id="subButton" jsf:action="#{userBean.searchPaymentHistory}" name="subButton" value="search" type="submit" class="wpcf7-form-control wpcf7-submit contactform" />
                                    </p>
                                    <br/>
                                    <p>
                                    	<p:dataTable id="tranHisTable" var="obj" value="#{userBean.ctList}"
											paginator="true" rows="100" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
											rowsPerPageTemplate="50,100,500" style="width:100%" resizableColumns="true">
											<f:facet name="header">
												Found transaction(s)
											</f:facet>
											
											<p:column sortBy="#{obj.tranRef}" headerText="Tran. Ref. No." filterBy="#{obj.tranRef}" filterMatchMode="contains">
												<h:outputText value="#{obj.tranRef}" />
											</p:column>
											<p:column sortBy="#{obj.customer.firstname}" headerText="Customer" filterBy="#{obj.customer.firstname}" filterMatchMode="contains">
												<h:outputText value="#{obj.customer.firstname} #{obj.customer.lastname}" />
											</p:column>
											<p:column sortBy="#{obj.product.details}" headerText="Product" filterBy="#{obj.product.details}" filterMatchMode="contains">
												<h:outputText value="#{obj.product.details}" />
											</p:column>
											<p:column sortBy="#{obj.tranInitDate}" headerText="Init. Date/Time">
												<h:outputText value="#{obj.tranInitDate}" />
											</p:column>
											<p:column sortBy="#{obj.amount}" headerText="Amount">
												<h:outputText value="#{obj.amount}" />
											</p:column>
											<p:column sortBy="#{obj.payFor}" headerText="Payment For">
												<h:outputText value="#{obj.payFor}" />
											</p:column>
											<p:column sortBy="#{obj.payMode}" headerText="Payment Mode">
												<h:outputText value="#{obj.payMode}" />
											</p:column>
											<p:column sortBy="#{obj.status}" headerText="Payment Status">
												<h:outputText value="#{obj.status}" />
											</p:column>
											<p:column sortBy="#{obj.payConfirmDate}" headerText="Confirmed Date/Time">
												<h:outputText value="#{obj.payConfirmDate}" />
											</p:column>
											<p:column headerText="Addition Info" filterBy="#{obj.confirmationInfo}" filterMatchMode="contains">
												<h:outputText value="#{obj.confirmationInfo}" />
											</p:column>
										</p:dataTable>
                                    </p>
                            	</h:form>
                            	</div>
                            	<div class="clear"></div>
                            </div><!-- section_inner -->
                        </div><!-- section_row -->
                        <div class="clear"></div>
                    </div><!-- .entry-content -->
                </div><!-- #main -->
                <div class="clear"></div>
            </div><!-- .inner -->
        </div><!-- .pagemid -->
    </ui:define>
</ui:composition>